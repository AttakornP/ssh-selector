#!/usr/bin/env python
from os import environ, system
from src.ssh_to_server import option_help, option_list, read_file, search_server
import sys


if __name__ == "__main__":
    server_name = sys.argv[1]
    config_file = environ["HOME"] + "/ssh-server"
    server_data = read_file(config_file)
    if "--" in server_name:
        if "list" in server_name:
            option_list(server_data)
        if "help" in server_name:
            option_help()
    else:
        server = search_server(server_data, server_name)
        ssh_cmd = "ssh {}@{} -p {}".format(server["user"], server["host"], server["port"])
        system(ssh_cmd)
